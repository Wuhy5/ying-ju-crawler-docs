# 图书数据源规则示例
# 
# 本示例演示如何为小说网站创建爬虫规则，包含：
# - 关键词搜索
# - 分类浏览
# - 列表页解析
# - 详情页及章节列表解析

[meta]
name = "笔趣阁"
author = "示例作者"
version = "1.0.0"
description = "笔趣阁小说数据采集规则（示例）"
domain = "www.biquge.info"
media_type = "book"
language = "zh-CN"
region = "CN"
tags = ["网络文学", "小说", "章节"]

[http]
user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
timeout = 30
retry_times = 3

[http.headers]
Referer = "https://www.biquge.info/"

# 搜索小说
[search]
entry_url_template = "https://{domain}/search?keyword={keyword}&page={page}"
method = "GET"
response_type = "html"

# 分类浏览
[discover]
entry_url_template = "https://{domain}/list/{cate_id}/page/{page}"
method = "GET"
response_type = "html"

[[discover.categories]]
name = "网游"
id = "1"

[[discover.categories]]
name = "魔法"
id = "2"

[[discover.categories]]
name = "武侠"
id = "3"

[[discover.categories]]
name = "悬疑"
id = "4"

[parse]
  # 列表页解析：搜索或分类结果
  [parse.list]
    item_selector = { type = "selector", query = "div.item-box" }
    
    [parse.list.fields]
      title = [
        { type = "selector", query = "h3 a", extract = "text" }
      ]
      
      url = [
        { type = "selector", query = "h3 a", extract = "attr:href" }
      ]
      
      cover = [
        { type = "selector", query = "img", extract = "attr:src" }
      ]
      
      description = [
        { type = "selector", query = "p.intro", extract = "text" }
      ]
      
      # 作者（图书特定字段）
      author = [
        { type = "selector", query = "span.author", extract = "text" }
      ]
      
      # ISBN 或其他标识
      isbn = [
        { type = "selector", query = "span.isbn", extract = "text" }
      ]
      
      # 出版社（图书特定字段）
      publisher = [
        { type = "selector", query = "span.publisher", extract = "text" }
      ]
      
      # 发布日期
      publish_date = [
        { type = "selector", query = "span.publish-date", extract = "text" }
      ]
  
  # 详情页解析
  [parse.detail]
    [parse.detail.fields]
      title = [
        { type = "selector", query = "h1", extract = "text" }
      ]
      
      author = [
        { type = "selector", query = "span.author", extract = "text" }
      ]
      
      cover = [
        { type = "selector", query = "img.cover", extract = "attr:src" }
      ]
      
      description = [
        { type = "selector", query = "div.book-info", extract = "text" }
      ]
      
      publisher = [
        { type = "selector", query = "span.publisher", extract = "text" }
      ]
      
      publish_date = [
        { type = "selector", query = "span.publish-date", extract = "text" }
      ]
      
      # 更新日期
      update_date = [
        { type = "selector", query = "span.update-date", extract = "text" }
      ]
      
      # 标签
      tags = [
        { type = "selector", query = "a.tag" }
      ]
      
      # 章节列表（图书重要特定字段）
      chapter_list = [
        { type = "selector", query = "div.chapter-list" }
      ]
